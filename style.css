/* Небольшие улучшения интерфейса: карточки, ховер, модал, кнопки */

:root{
  --bg:#060608;
  --panel:#0f1113;
  --muted:#b8b8b8;
  --accent:#1DB954;
  --glass: rgba(255,255,255,0.03);
  --radius:14px;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body,#root,.app{height:100%}
body{
  font-family: "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
  background: linear-gradient(180deg, var(--bg) 0%, #050505 100%);
  color:#fff; -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  min-height:100vh;
  display:flex; flex-direction:column;
}

/* Header */
.header{
  height:64px; display:flex; align-items:center; gap:20px;
  padding:12px 20px; border-bottom:1px solid rgba(255,255,255,0.03);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  backdrop-filter: blur(6px);
  box-shadow: 0 2px 18px rgba(0,0,0,0.6);
}
.logo{font-weight:800;font-size:18px; color:var(--accent)}
.nav{display:flex; gap:8px; margin-left:8px}
.nav-link{color:var(--muted); padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700; background:transparent; border:none}
.nav-link.active, .nav-link:hover{color:#fff; background:var(--glass)}

/* Header right */
.header-right{margin-left:auto; display:flex; gap:10px; align-items:center;}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 12px;border-radius:20px;cursor:pointer}
.btn.ghost:hover{color:#fff;border-color:var(--accent)}

/* Additions: search input, star/favorite, tooltip, queue */
.search{
  background: rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.03);
  color: #fff;
  padding:8px 10px;
  border-radius:10px;
  min-width:220px;
}
.search::placeholder{ color: rgba(255,255,255,0.4); }

.card {
  position: relative;
}
.card .fav {
  position: absolute;
  right:10px;
  top:10px;
  background: rgba(0,0,0,0.45);
  border-radius:50%;
  width:30px;height:30px;display:flex;align-items:center;justify-content:center;
  color: #fff; cursor:pointer; font-size:14px; border:1px solid rgba(255,255,255,0.04);
  transition: transform .12s, background .12s;
}
.card .fav.active { background: var(--accent); color:#000; transform: scale(1.06); }

/* Layout */
.layout{flex:1; display:grid; grid-template-columns:220px 1fr; gap:24px; padding:20px; overflow:hidden}
.sidebar{background:transparent;padding:8px 0}
.sidebar-section h4{color:var(--muted); margin-bottom:12px}
#playlists{list-style:none}
.playlist-item{padding:8px 10px; color:var(--muted); border-radius:8px; cursor:pointer; font-weight:600}
.playlist-item:hover{background:var(--soft); color:#fff}

/* Cards / Grid */
.main{overflow:auto;padding-right:10px}
.cards-section{margin-bottom:24px}
.cards-section h2{font-size:20px;margin-bottom:12px}
.cards-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(150px,1fr));
  gap:16px;
}
.card{
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
  padding:14px;
  border-radius:14px;
  cursor:pointer;
  transition: transform .18s ease, box-shadow .18s ease, background .12s;
  display:flex; flex-direction:column; gap:10px; align-items:flex-start;
}
.card:hover{
  transform: translateY(-8px);
  box-shadow: 0 18px 40px rgba(0,0,0,0.7);
}
.card:active{transform:translateY(-2px)}
.cover{
  width:100%; aspect-ratio:1; border-radius:10px;
  min-height:120px;
  background-size:cover; background-position:center;
  box-shadow: inset 0 -20px 40px rgba(0,0,0,0.25), 0 8px 22px rgba(0,0,0,0.6);
}
.card .title{font-weight:700; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; width:100%}
.card .artist{font-size:13px; color:var(--muted); width:100%}

/* Anime / Video grid styles */
.anime-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(220px,1fr));
  gap:16px;
}
.anime-card{ background:var(--panel); border-radius:12px; overflow:hidden; cursor:pointer; transition:transform .18s, box-shadow .18s; display:flex; flex-direction:column;}
.anime-card:hover{transform:translateY(-6px) scale(1.02); box-shadow:0 10px 30px rgba(0,0,0,0.6);}
.anime-cover{width:100%; aspect-ratio:16/9; object-fit:cover; background:#222;}
.anime-info{padding:10px 12px; display:flex; flex-direction:column; gap:6px;}
.anime-title{font-weight:700}
.anime-meta{color:var(--muted); font-size:13px}
.anime-desc{color:#ddd; font-size:13px; line-height:1.3; max-height:3em; overflow:hidden}

/* Player */
.player{
  height:86px; display:flex; align-items:center; gap:16px; padding:10px 18px;
  border-top:1px solid rgba(255,255,255,0.03); background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.85));
}
.player-left{display:flex; align-items:center; width:30%}
.track-info{display:flex; gap:12px; align-items:center}
.track-info .cover{width:56px;height:56px;border-radius:8px;background-size:cover;background-position:center}
.meta .title{font-weight:700}
.meta .artist{font-size:13px;color:var(--muted)}

.player-center{flex:1; display:flex; flex-direction:column; align-items:center; gap:8px}
.controls{display:flex; gap:14px; align-items:center}
.control-btn{
  width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;
  background:transparent;border:none;color:var(--muted);cursor:pointer; transition:transform .12s ease, background .12s;
}
.control-btn:hover{transform:scale(1.06); color:#fff}
.play-btn{width:54px;height:54px;border-radius:50%; background:var(--accent); color:#000; display:flex; align-items:center; justify-content:center; box-shadow:0 8px 20px rgba(29,185,84,0.18)}
.play-btn:active{transform:scale(.98)}
.play-btn.playing{animation: pulse 1.8s infinite;}

@keyframes pulse {
  0%{ box-shadow:0 8px 20px rgba(29,185,84,0.18); transform: scale(1); }
  50%{ box-shadow:0 14px 34px rgba(29,185,84,0.14); transform: scale(1.03); }
  100%{ box-shadow:0 8px 20px rgba(29,185,84,0.18); transform: scale(1); }
}

.progress-wrap{display:flex; gap:12px; align-items:center; width:100%; max-width:720px}
.time{font-size:12px;color:var(--muted); width:42px; text-align:center}
.progress-bar{height:6px; background:rgba(255,255,255,0.04); border-radius:6px; flex:1; cursor:pointer; position:relative; overflow:hidden}
.progress-filled{height:100%; width:0%; background:linear-gradient(90deg,var(--accent), #2ed77a); border-radius:6px; transition:width .1s linear}

/* Right */
.player-right{width:18%; display:flex; justify-content:flex-end; align-items:center}
#volume{width:110px; accent-color:var(--accent); cursor:pointer}

/* Active card */
.card.playing{outline:2px solid rgba(29,185,84,0.18); transform:translateY(-4px)}

/* Modal for videos */
.modal {
  position: fixed;
  inset: 0;
  background: #000a;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

/* Respect HTML hidden attribute — prevents modal from showing on load */
.modal[hidden] {
  display: none !important;
}

/* Ensure modal content & close button receive pointer events */
.modal-content {
  background: var(--panel);
  border-radius: 12px;
  max-width: 960px;
  width: calc(100vw - 40px);
  padding: 12px;
  position: relative;
  z-index: 101;
  padding:18px;
}

.close-btn {
  position: absolute;
  top: 8px; right: 12px;
  background: none; border: none; color: #fff; font-size: 26px; cursor: pointer;
  z-index: 102;
  background: rgba(255,255,255,0.03);
  width:38px;height:38px;border-radius:10px;
  display:flex;align-items:center;justify-content:center;
}
.close-btn:hover{ background: rgba(255,255,255,0.05); transform: scale(1.03); }

/* Responsive */
@media (max-width:900px){
  .layout{grid-template-columns: 1fr; padding:16px}
  .sidebar{display:none}
  .player{height:auto;padding:10px;}
  .player-left{display:none}
  .player-right{display:none}
  .progress-wrap{max-width:100%}
}
@media (max-width:600px){
  .header{padding:8px 8px;}
  .layout{padding:8px;}
  .cards-grid{gap:8px;}
  .player{padding:6px 4px;}
}

/* simple toast */
.toast {
  position: fixed; right: 18px; bottom: 96px; background: #111; color: #fff; padding:10px 14px; border-radius:10px;
  box-shadow:0 10px 30px rgba(0,0,0,0.6); z-index:9999; opacity:0; transform: translateY(8px);
  transition: opacity .2s, transform .2s;
}
.toast.show { opacity:1; transform: translateY(0); }

.progress-tooltip{
  position:fixed; pointer-events:none; background:var(--panel); color:#fff; padding:6px 8px; border-radius:6px;
  font-size:12px; box-shadow:0 6px 20px rgba(0,0,0,0.6); transform:translate(-50%,-120%);
  z-index:120;
  padding:7px 10px; border-radius:8px; font-weight:600;
}

/* control active states */
.control-btn.active { color: var(--accent); background: rgba(29,185,84,0.06); border-radius:10px; }

.egg-btn{
  background:transparent;
  border:none;
  color:var(--muted);
  font-size:16px;
  margin-left:8px;
  padding:6px;
  border-radius:8px;
  cursor:pointer;
  transition: transform .12s, color .12s, background .12s;
}
.egg-btn:hover{ transform:translateY(-2px); color:#fff; background: rgba(255,255,255,0.02); }

#volume-value{
  color:var(--muted);
  font-size:13px;
  margin-left:8px;
  min-width:36px;
  text-align:right;
}

/* Achievements / Account styles */
#achievements-list .card, #account-achievements .card {
  display:flex; flex-direction:column; align-items:flex-start; gap:8px;
  padding:12px; min-height:120px;
}
#account-box .card { min-height:80px; }

#account-login-form .search { margin-top:8px; }

/* small badge for unlocked */
.card button[disabled] { opacity:0.7; cursor:default; }